{% extends "base.html" %}

{% block content %}
    <header class="tab_00">

       

        <div style="display: flex;">
            <div class="title_00">Meeting Schedule    </div>
            <div class="title_00" style="margin-left: 20px; ">{{ today }}</div>
            <div id="clock_schedule" class="title_00" style="margin-left: 20px; "></div>
            {# {{ local_start_date}} #}
            <div style="margin-left: auto;">

                <form action="/schedule/up/" method="post">
                    <button type="submit" style="background-color: #444; color: #0f0;"> -â†‘- </button>
                </form>
                <form action="/schedule/down/" method="post">
                    <button type="submit" style="background-color: #444; color: #0f0;">-â†“-</button>
                </form>
            </div>

        </div>




        <div style="display: flex;">
            <!-- <form action="/tab_00/add_task/" method="post"> -->
            <form action="/schedule/update_task/{{ item.id }}" method="post">
                <input type="hidden" name="time_zone" value="{{ time_zone }}">

                <input type="text" name="name" value="{{ item.name }}" placeholder="Enter Name ..." style="background-color: #444; color: #fff;">
                

                <input id="input_date" type="date" name="date1" value="{{ selected_local_start_date }}" placeholder="MM/DD/YYYY"  style="background-color: #444; color: #fff;"
                        onfocus="(this.type='date')">
    




                <input type="time"; name="start_time" value="{{ selected_local_start_time }}";  style="background-color: #444; color: #fff;"
                        onfocus="(this.type='time')">
                <input type="time" name="end_time" value="{{ selected_local_end_time }}"   style="background-color: #444; color: #fff;">




                <input type="text" name="link" value="{{ item.link }}" placeholder="Enter link..." style="background-color: #444; color: #fff;">
                <input type="text" name="category" value="{{ item.category }}" placeholder="Enter cTEGORY..." style="background-color: #444; color: #fff;">
                <input type="text" name="status" value="{{ item.status }}" placeholder="Enter STATUS..." style="background-color: #444; color: #fff;">
                <button type="submit" name="action" value="update" style="background-color: #444; color: #0f0;">Update Task</button>
                <button type="submit" name="action" value="deplicate" style="background-color: #444; color: #0f0; ">Deplicate Task</button>
            </form>
            
            
            
        
        <form action="/schedule/delete_task/" method="post" style="display: inline;">
            <input type="hidden" name="item_id" value="{{ item.id }}">
            <button type="submit" style="background-color: #444; color: #0f0; margin-top: 2px; margin-left: 3px;">Delete Task</button>
        </form>
        
    </div>
    
    

            
        
    </header>
    <main class="tab_00">
        <div class="day_group">
            <div>Mon.</div>
            <div>Tue.</div>
            <div>Wed.</div>
            <div>Thu.</div>
            <div>Fri.</div>
            <div>Sat.</div>
            <div>Sun.</div>
        </div>

        <div class="scrollable-content">

            
            
            

            
            
            {% for ii in range(50) %}
            <div class="screen">
                {% for i in range(7) %}
                
                <!-- <div class="day"> -->
                    <div class="{{ 'day_active' if dates[i+ii*7] == today else 'day' }}">
                        <ul class="ul">   
                            <div id="dateClick" style="color: #0f0;" data-date1='{{ dates[i+ii*7] }}' onclick="onclickDate('{{ dates[i+ii*7] }}')">
                                
                                {{ dates[i+ii*7] }}
                            </div>

                            {% for item in df_combined %}
                                
                                
                                
                                
                                {% if dates[i+ii*7] == item["local_start_date"] %}
                            
                            
                                    <li class="li" onclick="onclickItem('{{ item.id }}', '{{ item.link }}')"> 
                                        
                                        
                                       


                                        {% if item.local_start_time == '00:00' and item.local_end_time == '00:00' %}

                                            {{ 'ðŸŸ© ' ~item.name }}
                                        {% else %}
                                            {{ item.local_start_time~ '-' ~item.local_end_time~ ' ' ~item.name }}

                                        {% endif %}


                                    
                                        
                                        
                                        
                                    </li>
                                {% endif %}
                            {% endfor %}
                            
                           
                        
                        </ul>
                    </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        

     




    </main>

    <script>
        // clock function

        function updateClock() {
          const now = new Date(); // Get the current date and time
          const hours = String(now.getHours()).padStart(2, '0');  // Get hours and ensure it's two digits
          const minutes = String(now.getMinutes()).padStart(2, '0');  // Get minutes and ensure it's two digits
          const seconds = String(now.getSeconds()).padStart(2, '0');  // Get seconds and ensure it's two digits

          // Format the time as HH:MM:SS
          // const timeString = `${hours}:${minutes}:${seconds}`;
          const timeString = `${hours}:${minutes}:${seconds}`;

          // Update the content of the 'clock' element with the formatted time
          document.getElementById('clock_schedule').textContent = timeString;
      }

      // Call the function once to set the initial time
      updateClock();

      // Update the clock every 1000 milliseconds (1 second)
      setInterval(updateClock, 1000);


  </script>
    
{% endblock %}
